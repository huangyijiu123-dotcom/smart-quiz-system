<!DOCTYPE html>
<html>
<head>
    <title>测试错题练习进度</title>
    <script src="webview-compat.js"></script>
</head>
<body>
    <h1>测试错题练习进度数据</h1>
    <button onclick="createTestProgress()">创建测试进度</button>
    <button onclick="clearTestProgress()">清除测试进度</button>
    <button onclick="checkProgress()">检查进度</button>
    <button onclick="goToWrongPage()">前往错题页面</button>
    
    <div id="result"></div>
    
    <script>
        function createTestProgress() {
            const testProgress = {
                practiceId: 'test_' + Date.now(),
                questionType: '单选题',
                questionCount: 10,
                currentQuestionIndex: 3,
                totalQuestions: 10,
                correctCount: 2,
                wrongCount: 1,
                timeLeft: 1800,
                startTime: Date.now() - 300000, // 5分钟前开始
                correctQuestions: [],
                wrongQuestions: [],
                questions: [
                    {id: 1, question: '测试题目1', type: '单选题'},
                    {id: 2, question: '测试题目2', type: '单选题'},
                    {id: 3, question: '测试题目3', type: '单选题'},
                    {id: 4, question: '测试题目4', type: '单选题'},
                    {id: 5, question: '测试题目5', type: '单选题'}
                ],
                lastSaveTime: Date.now(),
                practiceMode: 'wrong'
            };
            
            WebViewCompat.storage.setItem('wrongPracticeProgress_single', JSON.stringify(testProgress));
            document.getElementById('result').innerHTML = '<p style="color: green;">测试进度已创建</p>';
        }
        
        function clearTestProgress() {
            WebViewCompat.storage.removeItem('wrongPracticeProgress_single');
            WebViewCompat.storage.removeItem('wrongPracticeProgress_multiple');
            WebViewCompat.storage.removeItem('wrongPracticeProgress_judge');
            document.getElementById('result').innerHTML = '<p style="color: red;">测试进度已清除</p>';
        }
        
        function checkProgress() {
            const progress = WebViewCompat.storage.getItem('wrongPracticeProgress_single');
            if (progress) {
                document.getElementById('result').innerHTML = '<p style="color: blue;">找到进度数据:</p><pre>' + progress + '</pre>';
            } else {
                document.getElementById('result').innerHTML = '<p style="color: orange;">未找到进度数据</p>';
            }
        }
        
        function goToWrongPage() {
            window.location.href = 'wrong.html';
        }
    </script>
</body>
</html>